<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta   http-equiv="Cache-Control"   CONTENT="no-cache">
    <title>Title</title>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <script src="https://cdn.bootcss.com/marked/0.4.0/marked.js"></script>
    <script src="https://cdn.bootcss.com/ace/1.3.3/ace.js"></script>
    <script src="./js/tool.js"></script>
    <link rel="stylesheet" href="./font/iconfont.css">
    <link rel="stylesheet" href="./stylesheet/markdown.css">
    <link rel="stylesheet" href="./stylesheet/index.css">
    <link rel="stylesheet" href="stylesheet/buttonStyle.css">
    <link rel="stylesheet" href="./stylesheet/directory.css">
</head>

<body>
<div class="app">
    <div id="container" class="container">
        <div id="editor-column" class="column editor-column">
            <div id="editor-toolbar" class="toolbar">
                <div class="tool button" onclick="saveText()"><span class="iconfont icon-save" aria-hidden="true"></span></div>
                <div class="tool button" onclick="insertText('**?**')"><span class="iconfont icon-bold" aria-hidden="true"></span></div>
                <div class="tool button" onclick="insertText('_?_')"><span class="iconfont icon-italic" aria-hidden="true"></span></div>
                <div class="tool button" onclick="insertText('>')"><span class="iconfont icon-earth" aria-hidden="true"></span></div>
                <div class="tool button" onclick="insertText('<img src=\'\'>')"><span class="iconfont icon-file-image" aria-hidden="true"></span></div>
                <div class="tool button" onclick="insertText('* ')"><span class="iconfont icon-unorderedlist" aria-hidden="true"></span></div>
                <div class="tool button" onclick="insertText('1. ')"><span class="iconfont icon-orderedlist" aria-hidden="true"></span></div>
                <div class="tool button" onclick="insertText('`\n\n`', 'code')"><span class="iconfont icon-code" aria-hidden="true"></span></div>
                <div id= "button-fontsize" class="tool button" onclick="insertText('#')"><span class="iconfont icon-font-size" aria-hidden="true"></span></div>
                <div id= "button-fullScreen" class="tool button" onclick="fullScreen()"><span class="iconfont icon-fullscreen" aria-hidden="true"></span></div>
            </div>
            <div id="markdown-editor" class="editor-content md-area"></div>
        </div>
        <div id="preview-column" class="column preview-column">
            <div id="preview-toolbar" class="toolbar">
                <div class="tool button" onclick="showCatalog()"><span class="iconfont icon-menu" aria-hidden="true"></span></div>
                <div class="tool"></div>
            </div>
            <div id="markdown-preview" class="markdown-body md-area"></div>
        </div>
        <div id="md-catalog" class="md-catalog">
            <h3 align="center">目  录</h3>
            <ul id="md-catalogContent" class="md-catalogContent">

            </ul>
        </div>
    </div>
</div>
</body>
<script>
    var md_editor = ace.edit('markdown-editor');
    md_editor.setTheme('ace/theme/chrome');
    md_editor.setFontSize(16);
    md_editor.getSession().setMode('ace/mode/markdown');
    md_editor.setOption("wrap", "free")
    md_editor.renderer.setShowPrintMargin(false);
    $("#markdown-editor").keyup(function() {
        $("#markdown-preview").html(marked(md_editor.getValue()));
        createDiretory('markdown-preview', 'md-catalogContent');
    });

    md_editor.getSession().selection.on('changeCursor', function(e) {
        $("#markdown-preview").html(marked(md_editor.getValue()));
        createDiretory('markdown-preview', 'md-catalogContent');
    });
    /**
     * 滚动样式切换
     */
    function scrollChange() {

        $('.ace_scrollbar-v')[0].id = 'scrollbar'
        $('#scrollbar').scroll(function () {

            if(this.scrollTop > 0){

                $('#markdown-editor')[0].style.height = '100%';
                $('#markdown-editor')[0].style.marginTop = '0px';

            }else{

                $('#markdown-editor')[0].style.height = 'calc(100% - 40px)';
                $('#markdown-editor')[0].style.marginTop = '40px';

            }

        })

        $('#markdown-preview').scroll(function () {

            if(this.scrollTop > 0){

                this.style.height = '100%';
                this.style.marginTop = '0px';

            }else{

                this.style.height = 'calc(100% - 40px)';
                this.style.marginTop = '40px';

            }

        })
    }
    scrollChange();


</script>
</html>